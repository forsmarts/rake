<!DOCTYPE html>
<html>
<head>
    <title>Rake</title>

    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script src="js/snap.svg-min.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/data.js"></script>
    <script src="js/cell.js"></script>
    <script src="js/puzzle.js"></script>
    <script src="js/casual.js"></script>
    <script src="js/drag.js"></script>
    <script src="js/canvas.js"></script>
    <script src="js/view.js"></script>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <div class="container">
        <div class="row text-center">
            <h1 id="levelNumber"></h1>
        </div>
        <div class="row text-center">
            <svg id="mainGrid" width="550" height="600" />
        </div>
        <div class="row text-center">
            <h3 id="txtPuzzleHint"></h3>
        </div>
        <div class="row text-center">
            <span id="btnNextPuzzle" class="btn btn-primary btn-lg">Go to next puzzle</span>
        </div>
    </div>
</body>
<script>
    $(document).ready(function () {
        var type = new URL(window.location.href).searchParams.get("t");
        if (type=="c" || type=="causal") {
            var level = 4;
            view = new cRakeView("#levelNumber", '#mainGrid', "#txtPuzzleHint", "#btnNextPuzzle", () => view.show(new cRakeCasual(++level)));
            view.show(new cRakeCasual(level));
        } else {
            var storage = new cBandsStorage();
            rakeInitData(storage);
            view = new cRakeView("#levelNumber", '#mainGrid', "#txtPuzzleHint", "#btnNextPuzzle", () => view.show(storage.getNext()));
            view.show(storage.getNext());
        }
    });

</script>
</html>
